# Rust Project Purger

ä¸€ä¸ªç”¨äºæ¸…ç†Rusté¡¹ç›®æ„å»ºç›®å½•çš„å·¥å…·ï¼Œæ”¯æŒCLIå’ŒGUIä¸¤ç§ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æ‰«æ**: é€’å½’æ‰«æç›®å½•ä¸‹çš„æ‰€æœ‰Rusté¡¹ç›®
- ğŸ§¹ **å¤šç§æ¸…ç†ç­–ç•¥**: æ”¯æŒ`cargo clean`å’Œç›´æ¥åˆ é™¤ä¸¤ç§æ–¹å¼
- ğŸ“Š **å¤§å°ç»Ÿè®¡**: æ˜¾ç¤ºæ¯ä¸ªé¡¹ç›®çš„targetç›®å½•å¤§å°
- âœ… **é€‰æ‹©æ€§æ¸…ç†**: å¯ä»¥é€‰æ‹©è¦æ¸…ç†çš„ç‰¹å®šé¡¹ç›®
- ğŸ–¥ï¸ **åŒç•Œé¢**: æä¾›å‘½ä»¤è¡Œå’Œå›¾å½¢ç•Œé¢ä¸¤ç§ä½¿ç”¨æ–¹å¼
- ğŸš€ **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¹¶è¡Œæ‰«æå’Œæ¸…ç†ä»¥æé«˜æ•ˆç‡
- â° **æ—¶é—´è¿‡æ»¤**: ä¿ç•™æœ€è¿‘ç¼–è¯‘çš„é¡¹ç›®ï¼Œé¿å…æ¸…ç†æ­£åœ¨ä½¿ç”¨çš„é¡¹ç›®
- ğŸ“ **å¤§å°è¿‡æ»¤**: ä¿ç•™å°äºæŒ‡å®šå¤§å°çš„targetç›®å½•
- ğŸ“ **è·¯å¾„å¿½ç•¥**: æ”¯æŒå¿½ç•¥ç‰¹å®šç›®å½•ï¼Œé¿å…è¯¯åˆ é‡è¦é¡¹ç›®
- ğŸ’¾ **å¯æ‰§è¡Œæ–‡ä»¶å¤‡ä»½**: åœ¨æ¸…ç†å‰è‡ªåŠ¨å¤‡ä»½ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶

## é¡¹ç›®ç»“æ„

```
purger/
â”œâ”€â”€ purger-core/     # æ ¸å¿ƒé€»è¾‘åº“
â”œâ”€â”€ purger-cli/      # å‘½ä»¤è¡Œç•Œé¢
â”œâ”€â”€ purger-gui/      # å›¾å½¢ç•Œé¢
â””â”€â”€ README.md
```

## å®‰è£…

[![Crates.io](https://img.shields.io/crates/v/purger-cli.svg)](https://crates.io/crates/purger-cli)
[![Crates.io](https://img.shields.io/crates/v/purger-gui.svg)](https://crates.io/crates/purger-gui)
[![Crates.io](https://img.shields.io/crates/v/purger-core.svg)](https://crates.io/crates/purger-core)

### ä» crates.io å®‰è£… (æ¨è)

```bash
# å®‰è£…å‘½ä»¤è¡Œç‰ˆæœ¬
cargo install purger-cli

# å®‰è£…å›¾å½¢ç•Œé¢ç‰ˆæœ¬
cargo install purger-gui

# æˆ–è€…å®‰è£…å®Œæ•´åŒ…
cargo install purger
```

### ä»æºç ç¼–è¯‘

```bash
# å®‰è£… CLI ç‰ˆæœ¬
cargo install purger

# å®‰è£…åŒ…å« GUI çš„å®Œæ•´ç‰ˆæœ¬
cargo install purger --features gui
```

å®‰è£…åå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š
```bash
# CLI ç‰ˆæœ¬
purger scan
purger clean --all

# GUI ç‰ˆæœ¬ (å¦‚æœå®‰è£…äº† gui åŠŸèƒ½)
purger-gui
```

### ä»æºç æ„å»º

```bash
git clone <repository-url>
cd purger
cargo build --release
```

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äºï¼š
- CLIç‰ˆæœ¬: `target/release/purger`
- GUIç‰ˆæœ¬: `target/release/purger-gui`

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œç•Œé¢ (CLI)

#### æ‰«æé¡¹ç›®
```bash
# æ‰«æå½“å‰ç›®å½•
purger scan

# æ‰«ææŒ‡å®šç›®å½•
purger scan /path/to/projects

# åªæ˜¾ç¤ºæœ‰targetç›®å½•çš„é¡¹ç›®
purger scan --target-only

# æŒ‰å¤§å°æ’åº
purger scan --sort-by-size

# é™åˆ¶æ‰«ææ·±åº¦
purger scan --max-depth 5

# ä½¿ç”¨è¿‡æ»¤é€‰é¡¹
purger scan --keep-days 7 --keep-size 10MB --ignore ~/Downloads
```

#### æ¸…ç†é¡¹ç›®
```bash
# æ¸…ç†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰é¡¹ç›®
purger clean

# é¢„è§ˆæ¸…ç†æ“ä½œï¼ˆä¸å®é™…åˆ é™¤ï¼‰
purger clean --dry-run

# ä½¿ç”¨ç›´æ¥åˆ é™¤ç­–ç•¥
purger clean --strategy delete

# è·³è¿‡ç¡®è®¤æç¤º
purger clean --yes

# æ¸…ç†æŒ‡å®šç›®å½•
purger clean /path/to/projects

# ä½¿ç”¨è¿‡æ»¤å’Œå¤‡ä»½é€‰é¡¹
purger clean --keep-days 7 --keep-size 10MB --keep-executable --ignore ~/Downloads
```

#### æ–°å¢å‘½ä»¤è¡Œé€‰é¡¹

**æ‰«æè¿‡æ»¤é€‰é¡¹:**
- `--keep-days <DAYS>`: ä¿ç•™æœ€è¿‘Nå¤©ç¼–è¯‘çš„é¡¹ç›®
- `--keep-size <SIZE>`: ä¿ç•™targetç›®å½•å°äºæŒ‡å®šå¤§å°çš„é¡¹ç›® (å¦‚: 10MB, 1GB)
- `--ignore <PATH>`: å¿½ç•¥ç‰¹å®šç›®å½• (å¯å¤šæ¬¡ä½¿ç”¨)

**æ¸…ç†é€‰é¡¹:**
- `--keep-executable`: ä¿ç•™å¯æ‰§è¡Œæ–‡ä»¶ (è‡ªåŠ¨å¤‡ä»½)
- `--executable-backup-dir <DIR>`: æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶å¤‡ä»½ç›®å½•

**é€šç”¨é€‰é¡¹:**
- `--verbose, -v`: æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
- `--debug, -d`: æ˜¾ç¤ºè°ƒè¯•æ—¥å¿—
- `--help, -h`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

### å›¾å½¢ç•Œé¢ (GUI)

è¿è¡ŒGUIç‰ˆæœ¬ï¼š
```bash
purger-gui
```

GUIåŠŸèƒ½ï¼š
- è®¾ç½®æ‰«æè·¯å¾„å’Œæ·±åº¦
- å®æ—¶æ˜¾ç¤ºæ‰«æè¿›åº¦
- å¯è§†åŒ–é¡¹ç›®åˆ—è¡¨å’Œå¤§å°
- é€‰æ‹©æ€§æ¸…ç†é¡¹ç›®
- æ˜¾ç¤ºæ¸…ç†ç»“æœç»Ÿè®¡
- è¿‡æ»¤é€‰é¡¹é…ç½® (æ—¶é—´ã€å¤§å°ã€å¿½ç•¥è·¯å¾„)
- å¯æ‰§è¡Œæ–‡ä»¶å¤‡ä»½è®¾ç½®
- å¤šè¯­è¨€æ”¯æŒ

## æ¸…ç†ç­–ç•¥

### Cargo Clean (æ¨è)
- ä½¿ç”¨`cargo clean`å‘½ä»¤æ¸…ç†
- æ›´å®‰å…¨ï¼Œåªåˆ é™¤Cargoç”Ÿæˆçš„æ„å»ºäº§ç‰©
- ä¿ç•™ç”¨æˆ·æ‰‹åŠ¨æ”¾å…¥targetçš„æ–‡ä»¶
- æ­£ç¡®å¤„ç†å·¥ä½œç©ºé—´ä¾èµ–

### ç›´æ¥åˆ é™¤
- ç›´æ¥åˆ é™¤æ•´ä¸ªtargetç›®å½•
- é€Ÿåº¦æ›´å¿«ï¼Œä½†å¯èƒ½åˆ é™¤éCargoæ–‡ä»¶
- é€‚ç”¨äºç¡®å®štargetç›®å½•åªåŒ…å«æ„å»ºäº§ç‰©çš„æƒ…å†µ

## é…ç½®

### æ‰«æé…ç½®
- `max_depth`: æœ€å¤§æ‰«ææ·±åº¦ï¼ˆé»˜è®¤10å±‚ï¼‰
- `follow_links`: æ˜¯å¦è·Ÿéšç¬¦å·é“¾æ¥ï¼ˆé»˜è®¤falseï¼‰
- `respect_gitignore`: æ˜¯å¦éµå¾ª.gitignoreè§„åˆ™ï¼ˆé»˜è®¤trueï¼‰
- `ignore_hidden`: æ˜¯å¦å¿½ç•¥éšè—æ–‡ä»¶ï¼ˆé»˜è®¤trueï¼‰
- `keep_days`: ä¿ç•™æœ€è¿‘Nå¤©ç¼–è¯‘çš„é¡¹ç›®ï¼ˆå¯é€‰ï¼‰
- `keep_size`: ä¿ç•™å°äºæŒ‡å®šå¤§å°çš„targetç›®å½•ï¼ˆå¯é€‰ï¼‰
- `ignore_paths`: å¿½ç•¥çš„è·¯å¾„åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

### æ¸…ç†é…ç½®
- `strategy`: æ¸…ç†ç­–ç•¥ï¼ˆcargo/deleteï¼‰
- `dry_run`: é¢„è§ˆæ¨¡å¼ï¼ˆé»˜è®¤falseï¼‰
- `parallel`: å¹¶è¡Œå¤„ç†ï¼ˆé»˜è®¤trueï¼‰
- `keep_executable`: æ˜¯å¦ä¿ç•™å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆé»˜è®¤falseï¼‰
- `executable_backup_dir`: å¯æ‰§è¡Œæ–‡ä»¶å¤‡ä»½ç›®å½•ï¼ˆå¯é€‰ï¼‰

## å¼€å‘

### è¿è¡Œæµ‹è¯•
```bash
cargo test
```

### è¿è¡ŒCLIç‰ˆæœ¬
```bash
cargo run --bin purger -- scan
```

### è¿è¡ŒGUIç‰ˆæœ¬
```bash
cargo run --bin purger-gui
```

### ä»£ç ç»“æ„

#### purger-core
æ ¸å¿ƒåŠŸèƒ½åº“ï¼ŒåŒ…å«ï¼š
- `ProjectScanner`: é¡¹ç›®æ‰«æå™¨
- `ProjectCleaner`: é¡¹ç›®æ¸…ç†å™¨
- `ProjectFilter`: é¡¹ç›®è¿‡æ»¤å™¨
- `RustProject`: é¡¹ç›®ä¿¡æ¯ç»“æ„
- å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰

#### purger-cli
å‘½ä»¤è¡Œç•Œé¢ï¼Œä½¿ç”¨clapè¿›è¡Œå‚æ•°è§£æã€‚

#### purger-gui
å›¾å½¢ç•Œé¢ï¼Œä½¿ç”¨eguiæ¡†æ¶æ„å»ºã€‚

## ä¾èµ–

ä¸»è¦ä¾èµ–ï¼š
- `walkdir`: ç›®å½•éå†
- `ignore`: .gitignoreæ”¯æŒ
- `clap`: å‘½ä»¤è¡Œå‚æ•°è§£æ
- `egui/eframe`: GUIæ¡†æ¶
- `tokio`: å¼‚æ­¥è¿è¡Œæ—¶
- `rayon`: å¹¶è¡Œå¤„ç†
- `anyhow`: é”™è¯¯å¤„ç†

## è®¸å¯è¯

MIT OR Apache-2.0

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## æ³¨æ„äº‹é¡¹

- æ¸…ç†æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…ä½¿ç”¨
- å»ºè®®å…ˆä½¿ç”¨`--dry-run`é¢„è§ˆæ¸…ç†ç»“æœ
- å¤§å‹é¡¹ç›®æ¸…ç†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„æƒé™è®¿é—®ç›®æ ‡ç›®å½•
